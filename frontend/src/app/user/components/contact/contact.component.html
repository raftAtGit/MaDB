<section id="contact" *ngIf="form">

  <form [formGroup]="form" (ngSubmit)="onSubmit(form)" autocomplete="false">
    <h2>Contact</h2>

    <!-- Project name -->
    <mat-form-field class="form-item">
      <mat-label for="name">Project name</mat-label>
      <input matInput name="name" [value]="projectService?.selectedProject()?.name" disabled>
    </mat-form-field>
  
    <!-- First name -->
    <mat-form-field class="form-item">
      <mat-label for="first_name">First name</mat-label>
      <input matInput name="first_name" formControlName="first_name">
      <mat-error *ngIf="form.get('first_name').invalid">
        First name is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Last name -->
    <mat-form-field class="form-item">
      <mat-label for="last_name">Last name</mat-label>
      <input matInput name="last_name" formControlName="last_name">
      <mat-error *ngIf="form.get('last_name').invalid">
        Last name is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Email -->
    <mat-form-field class="form-item">
      <mat-label for="email">Email</mat-label>
      <input matInput name="email" formControlName="email">
      <mat-error *ngIf="form.get('email').invalid">
        Email is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Country -->
    <mat-form-field class="form-item">
      <mat-label for="country">Country</mat-label>
      <input matInput name="country" formControlName="country">
      <mat-error *ngIf="form.get('country').invalid">
        Country is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Function -->
    <mat-form-field class="form-item">
      <mat-label for="functions">Function</mat-label>
      <input matInput name="functions" formControlName="functions">
      <mat-error *ngIf="form.get('functions').invalid">
        Function is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Type of Contact -->
    <mat-form-field class="form-item">
      <mat-label for="type_of_contact">Type of Contact</mat-label>
      <input matInput name="type_of_contact" formControlName="type_of_contact">
      
      <mat-select name="type_of_contact" formControlName="type_of_contact">
        <mat-option disabled>Select type of contact</mat-option>
        <mat-option value="Primary Contact">Primary Contact</mat-option>
        <mat-option value="Secondary Contact">Secondary </mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('type_of_contact').invalid">
        Type of Contact is <strong>required</strong>
      </mat-error>
    </mat-form-field>

    <!-- Submit button -->
    <div class="submit">
      <button mat-button type="submit" color="accent" [class.disabled]="form.invalid">Add</button>
    </div>

  </form>

  <ng-container *ngIf="dataSource?.length">
    <h3 class="table-title">Added Contacts</h3>
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="first_name">
        <th mat-header-cell *matHeaderCellDef>First name</th>
        <td mat-cell *matCellDef="let row">{{row.first_name}}</td>
      </ng-container>
      <ng-container matColumnDef="last_name">
        <th mat-header-cell *matHeaderCellDef>Last name</th>
        <td mat-cell *matCellDef="let row">{{row.last_name}}</td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let row">{{row.email}}</td>
      </ng-container>
      <ng-container matColumnDef="country">
        <th mat-header-cell *matHeaderCellDef>Country</th>
        <td mat-cell *matCellDef="let row">{{row.country}}</td>
      </ng-container>
      <ng-container matColumnDef="function">
        <th mat-header-cell *matHeaderCellDef>Function</th>
        <td mat-cell *matCellDef="let row">{{row.function}}</td>
      </ng-container>
      <ng-container matColumnDef="type_of_contact">
        <th mat-header-cell *matHeaderCellDef>Type of Contact</th>
        <td mat-cell *matCellDef="let row">{{row.type_of_contact}}</td>
      </ng-container>
      <ng-container matColumnDef="addedBy">
        <th mat-header-cell *matHeaderCellDef>Added By</th>
        <td mat-cell *matCellDef="let row">{{row.user}}</td>
      </ng-container>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let row"><button mat-button color="warn" (click)="remove(row)">Remove</button></td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </ng-container>

</section>